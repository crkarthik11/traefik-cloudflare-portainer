http:
  middlewares:
    custom-auth:
      basicAuth:
        users:
          - {BASIC_AUTH_USER1} # htpasswd -nb user password
          - {BASIC_AUTH_USER2} # htpasswd -nb user password
  services:
    portainer-service:
      loadBalancer:
        servers:
          - url: "http://portainer:9000"  
          
  routers:
    traefik:
      entryPoints:
        - websecure
      service: api@internal
      rule: Host("traefik.${BASE_DOMAIN}")
      # middlewares:
      #   - custom-auth
      tls:
        certresolver: cloudflare
        domains: 
          - main: "${BASE_DOMAIN}"
            sans: 
              - "${BASE_DOMAIN}"

    portainer-router:
      rule: "Host(`admin.${BASE_DOMAIN}`)"  
      service: portainer-service
      # middlewares:
      #   - custom-auth
      tls:
        certresolver: cloudflare
        domains: 
          - main: "${BASE_DOMAIN}"
            sans: 
              - "${BASE_DOMAIN}"

  


  